#位置1?四个月来的图形
# /Library/Frameworks/Python.framework/Versions/3.5/bin/python3.5 /Users/root_1/PycharmProjects/untitled13/7月.py
# a=[14, 12, 2, 2, 2, 2, 19, 94, 243, 350, 278, 400, 292, 262, 267, 319, 222, 317, 293, 285, 305, 253, 165, 54, 9, 8, 0, 2, 1, 6, 31, 744, 473, 991, 547, 535, 375, 281, 305, 315, 282, 486, 347, 270, 266, 258, 192, 68, 23, 12, 10, 3, 3, 2, 21, 96, 249, 281, 251, 400, 272, 276, 301, 276, 199, 471, 376, 294, 243, 227, 154, 40, 9, 6, 0, 2, 0, 3, 16, 49, 122, 143, 171, 197, 201, 104, 114, 104, 118, 212, 185, 182, 174, 160, 109, 38, 11, 2, 4, 5, 5, 6, 26, 47, 103, 133, 198, 225, 236, 150, 181, 157, 150, 248, 276, 273, 229, 223, 164, 52, 7, 2, 3, 2, 3, 7, 26, 327, 430, 374, 404, 529, 252, 430, 316, 257, 298, 462, 336, 261, 243, 206, 180, 29, 5, 2, 1, 2, 3, 7, 17, 143, 580, 318, 307, 617, 268, 479, 343, 225, 373, 493, 396, 303, 271, 267, 195, 45, 11, 17, 7, 3, 2, 8, 12, 149, 529, 313, 299, 660, 295, 467, 318, 267, 274, 464, 346, 318, 253, 253, 148, 32, 8, 0, 1, 2, 2, 6, 16, 118, 484, 384, 274, 574, 340, 405, 291, 228, 273, 402, 305, 253, 298, 218, 156, 45, 5, 1, 1, 1, 1, 4, 12, 70, 290, 232, 196, 373, 241, 326, 317, 280, 266, 398, 282, 636, 918, 738, 427, 55, 23, 9, 0, 1, 0, 2, 10, 139, 228, 214, 586, 342, 245, 235, 188, 117, 181, 278, 306, 242, 210, 194, 148, 31, 4, 3, 0, 1, 0, 4, 31, 109, 230, 216, 186, 298, 287, 250, 218, 179, 206, 321, 319, 283, 254, 207, 128, 37, 4, 1, 1, 1, 3, 7, 30, 159, 506, 329, 240, 503, 333, 351, 336, 219, 254, 437, 386, 284, 241, 274, 180, 39, 6, 1, 1, 1, 2, 3, 25, 116, 418, 277, 231, 485, 323, 308, 285, 204, 292, 442, 386, 276, 223, 277, 186, 57, 6, 2, 0, 1, 1, 8, 20, 120, 455, 375, 268, 456, 354, 356, 256, 203, 234, 446, 392, 284, 268, 251, 191, 33, 2, 0, 0, 0, 1, 2, 9, 81, 360, 321, 208, 411, 345, 276, 349, 244, 226, 423, 348, 266, 243, 210, 172, 47, 8, 0, 1, 1, 0, 6, 16, 64, 226, 181, 243, 372, 261, 210, 207, 181, 207, 324, 295, 249, 225, 158, 139, 31, 6, 3, 3, 1, 0, 7, 11, 26, 120, 164, 181, 247, 227, 155, 119, 139, 137, 242, 225, 209, 156, 202, 75, 17, 5, 1, 0, 0, 1, 0, 8, 29, 84, 121, 134, 183, 194, 159, 135, 163, 176, 246, 223, 221, 204, 180, 59, 9, 5, 3, 1, 1, 1, 2, 8, 55, 168, 180, 131, 259, 225, 144, 136, 99, 122, 249, 247, 219, 174, 192, 72, 21, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 3, 13, 65, 153, 163, 182, 223, 173, 97, 76, 106, 93, 139, 200, 167, 119, 134, 62, 9, 2, 1, 1, 2, 2, 2, 10, 95, 177, 148, 176, 213, 240, 180, 99, 120, 129, 198, 179, 156, 138, 125, 74, 10, 6, 0, 0, 0, 1, 4, 23, 121, 138, 154, 129, 244, 229, 166, 149, 143, 165, 230, 185, 182, 149, 155, 67, 11, 4, 1, 1, 1, 2, 5, 14, 115, 166, 170, 147, 227, 194, 160, 110, 104, 137, 179, 183, 163, 171, 129, 65, 14, 2, 1, 2, 1, 1, 3, 8, 60, 137, 124, 105, 203, 135, 100, 103, 79, 105, 163, 171, 181, 162, 162, 78, 13, 5, 3, 2, 3, 2, 2, 16, 37, 114, 109, 96, 152, 79, 60, 56, 61, 66, 123, 158, 110, 146, 119, 66, 20, 1, 2, 2, 1, 1, 4, 15, 43, 90, 208, 238, 164, 149, 94, 67, 70, 86, 177, 139, 148, 141, 159, 64, 12, 2, 2, 3, 3, 1, 6, 12, 34, 94, 121, 116, 141, 171, 101, 110, 52, 91, 237, 206, 213, 160, 145, 56, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 6, 10, 56, 112, 106, 167, 205, 157, 112, 91, 94, 115, 171, 165, 171, 136, 136, 49, 15, 5, 1, 1, 1, 1, 2, 8, 67, 126, 172, 176, 225, 184, 166, 126, 110, 149, 220, 199, 166, 144, 146, 57, 14, 6, 2, 1, 1, 1, 4, 22, 65, 120, 155, 174, 223, 175, 143, 147, 114, 156, 215, 139, 200, 161, 152, 66, 15, 6, 1, 2, 3, 1, 6, 18, 47, 125, 143, 147, 192, 205, 132, 137, 123, 114, 159, 208, 176, 161, 141, 72, 15, 2, 0, 0, 1, 2, 3, 16, 42, 118, 141, 125, 170, 148, 112, 91, 74, 107, 201, 188, 187, 174, 147, 69, 0, 0, 0, 5, 3, 0, 1, 11, 27, 81, 138, 142, 149, 134, 137, 139, 141, 152, 163, 165, 152, 124, 96, 52, 6, 4, 1, 1, 1, 1, 2, 6, 46, 126, 170, 189, 220, 171, 115, 124, 104, 102, 181, 184, 165, 162, 137, 39, 8, 5, 2, 2, 1, 1, 1, 14, 35, 113, 123, 104, 209, 212, 116, 97, 103, 139, 264, 216, 244, 160, 170, 79, 15, 5, 3, 2, 3, 4, 3, 15, 44, 134, 180, 161, 224, 213, 149, 123, 99, 132, 187, 211, 212, 139, 152, 63, 15, 6, 4, 3, 4, 4, 6, 14, 42, 76, 104, 63, 142, 134, 110, 97, 83, 108, 164, 226, 171, 174, 173, 53, 24, 8, 3, 4, 4, 3, 4, 10, 31, 96, 139, 131, 150, 161, 87, 87, 77, 51, 120, 132, 103, 63, 97, 33, 8, 2, 2, 3, 1, 1, 4, 7, 25, 43, 109, 107, 181, 144, 125, 88, 112, 114, 205, 178, 149, 107, 146, 61, 18, 13, 3, 3, 3, 3, 2, 19, 82, 174, 229, 193, 293, 265, 207, 197, 186, 215, 340, 332, 324, 229, 221, 107, 13, 3, 3, 4, 3, 2, 3, 20, 377, 281, 328, 557, 580, 408, 505, 396, 341, 410, 533, 366, 273, 223, 196, 126, 21, 2, 2, 2, 0, 3, 19, 116, 459, 856, 755, 698, 1012, 625, 866, 660, 511, 578, 604, 501, 299, 290, 278, 176, 29, 5, 1, 3, 3, 2, 10, 82, 420, 608, 541, 540, 822, 433, 592, 407, 414, 461, 533, 378, 239, 195, 203, 152, 37, 3, 3, 0, 0, 0, 2, 22, 276, 520, 491, 442, 801, 469, 564, 380, 267, 408, 480, 321, 188, 168, 182, 96, 12, 1, 3, 4, 2, 3, 6, 21, 495, 469, 333, 309, 512, 419, 486, 459, 391, 283, 244, 168, 76, 83, 76, 94, 22, 36, 3, 1, 3, 2, 4, 24, 103, 227, 212, 304, 332, 320, 223, 243, 180, 217, 338, 280, 220, 184, 183, 119, 24, 76, 1, 2, 1, 3, 3, 11, 60, 170, 174, 178, 222, 233, 185, 186, 189, 196, 285, 256, 203, 215, 219, 166, 40, 13, 4, 3, 2, 1, 3, 22, 268, 493, 289, 299, 583, 386, 628, 357, 312, 407, 643, 533, 283, 360, 265, 131, 31, 3, 3, 9, 3, 1, 4, 18, 248, 402, 366, 255, 563, 324, 554, 352, 337, 379, 546, 515, 292, 260, 294, 176, 42, 5, 1, 1, 2, 1, 2, 54, 274, 421, 415, 291, 602, 318, 558, 312, 317, 374, 555, 453, 319, 297, 206, 151, 26, 8, 4, 2, 1, 1, 2, 10, 251, 456, 380, 372, 666, 452, 504, 289, 405, 324, 536, 439, 259, 203, 158, 90, 14, 4, 2, 3, 3, 2, 3, 52, 279, 401, 389, 320, 513, 451, 522, 324, 350, 305, 530, 398, 259, 308, 207, 155, 30, 5, 4, 1, 1, 0, 4, 16, 74, 186, 205, 190, 285, 304, 227, 216, 207, 287, 323, 285, 230, 199, 233, 139, 24, 5, 3, 2, 1, 11, 9, 18, 58, 164, 168, 180, 297, 250, 190, 166, 195, 233, 295, 279, 124, 94, 59, 96, 11, 4, 0, 3, 0, 0, 0, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 4, 7, 276, 244, 317, 296, 700, 438, 483, 326, 349, 380, 422, 377, 252, 265, 300, 185, 23, 5, 4, 2, 1, 2, 3, 20, 270, 282, 371, 440, 566, 341, 513, 291, 354, 391, 458, 435, 237, 273, 231, 167, 29, 12, 3, 3, 3, 3, 5, 20, 287, 282, 342, 330, 600, 375, 472, 261, 372, 325, 588, 364, 190, 227, 224, 117, 20, 5, 3, 2, 2, 3, 3, 12, 211, 274, 336, 316, 513, 387, 406, 318, 341, 344, 440, 401, 219, 215, 228, 128, 36, 6, 3, 1, 2, 1, 2, 14, 46, 123, 166, 181, 229, 218, 159, 145, 144, 157, 248, 241, 150, 173, 169, 127, 23, 6, 1, 0, 0, 0, 1, 12, 32, 87, 139, 147, 240, 193, 157, 133, 94, 57, 77, 75, 20, 72, 36, 86, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 271, 216, 391, 420, 433, 238, 487, 292, 564, 453, 295, 265, 279, 217, 32, 5, 1, 1, 2, 1, 3, 18, 332, 308, 414, 295, 505, 426, 449, 235, 371, 312, 485, 459, 226, 247, 192, 133, 12, 4, 1, 0, 0, 0, 1, 20, 275, 247, 449, 311, 378, 562, 415, 259, 412, 193, 448, 312, 113, 138, 102, 77, 15, 7, 3, 1, 2, 3, 2, 10, 42, 73, 107, 111, 161, 173, 82, 133, 109, 107, 173, 194, 150, 117, 125, 59, 14, 3, 4, 1, 1, 4, 2, 7, 33, 97, 117, 109, 164, 188, 122, 87, 105, 97, 153, 135, 126, 126, 152, 75, 19, 4, 3, 2, 2, 3, 4, 7, 36, 80, 92, 96, 165, 152, 117, 98, 109, 125, 180, 148, 210, 90, 126, 71, 21, 6, 3, 1, 2, 2, 2, 13, 39, 69, 107, 121, 155, 151, 120, 95, 131, 101, 162, 192, 119, 111, 156, 53, 17, 5, 1, 1, 0, 0, 1, 7, 36, 74, 122, 144, 171, 181, 110, 142, 105, 128, 248, 363, 136, 110, 145, 59, 19, 7, 2, 2, 4, 2, 5, 9, 31, 69, 95, 156, 225, 180, 138, 131, 112, 184, 206, 205, 181, 137, 141, 58, 9, 4, 2, 0, 1, 0, 2, 12, 20, 72, 112, 122, 168, 200, 144, 152, 140, 160, 220, 228, 197, 140, 165, 71, 17, 4, 2, 4, 2, 3, 2, 13, 230, 202, 295, 256, 459, 429, 488, 267, 490, 234, 544, 428, 218, 219, 204, 161, 24, 7, 2, 2, 1, 1, 5, 15, 220, 296, 444, 195, 445, 324, 373, 233, 376, 198, 445, 441, 234, 236, 251, 149, 31, 7, 4, 3, 5, 4, 4, 12, 186, 249, 398, 319, 462, 477, 443, 247, 403, 259, 565, 347, 195, 136, 107, 133, 21, 2, 2, 1, 2, 2, 3, 9, 69, 160, 137, 258, 367, 241, 202, 233, 224, 210, 394, 436, 286, 273, 209, 157, 38, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 4, 18, 265, 312, 483, 436, 632, 386, 473, 251, 445, 325, 788, 517, 358, 351, 269, 193, 52, 7, 4, 4, 4, 4, 6, 15, 257, 286, 409, 569, 578, 704, 611, 351, 551, 445, 842, 785, 666, 774, 356, 201, 82, 33, 17, 17, 10, 10, 10, 43, 203, 333, 459, 743, 934, 764, 504, 389, 493, 578, 655, 635, 716, 375, 200, 182, 106, 27, 13, 8, 9, 8, 13, 83, 289, 847, 939, 1116, 1304, 1236, 839, 804, 920, 1041, 988, 519, 385, 268, 213, 463, 49, 11, 3, 3, 2, 1, 2, 21, 229, 339, 362, 321, 499, 635, 589, 335, 443, 364, 830, 555, 270, 403, 412, 249, 50, 10, 7, 7, 8, 5, 3, 20, 311, 282, 398, 266, 590, 570, 561, 332, 457, 381, 699, 569, 300, 148, 268, 211, 37, 9, 5, 5, 2, 2, 1, 16, 283, 307, 372, 316, 528, 601, 622, 151, 396, 392, 687, 481, 226, 267, 292, 202, 24, 9, 4, 2, 3, 4, 6, 16, 250, 281, 315, 255, 476, 381, 457, 275, 480, 302, 755, 564, 284, 269, 305, 240, 69, 12, 7, 7, 3, 6, 2, 20, 230, 295, 355, 283, 501, 434, 459, 262, 393, 333, 713, 498, 227, 268, 239, 192, 59, 22, 16, 18, 14, 9, 19, 20, 215, 321, 353, 350, 491, 391, 419, 255, 220, 308, 498, 301, 330, 177, 220, 161, 49, 5, 5, 8, 4, 2, 11, 19, 167, 174, 266, 256, 374, 388, 364, 181, 220, 344, 276, 331, 310, 199, 229, 150, 32, 9, 8, 5, 8, 5, 16, 20, 223, 267, 397, 264, 439, 511, 536, 286, 474, 384, 673, 512, 272, 280, 373, 199, 31, 3, 3, 3, 2, 2, 7, 20, 291, 329, 326, 298, 576, 616, 616, 280, 461, 394, 839, 611, 315, 294, 424, 275, 84, 7, 2, 3, 2, 3, 4, 17, 290, 362, 398, 401, 595, 605, 731, 338, 459, 465, 686, 654, 291, 363, 399, 249, 62, 8, 4, 4, 4, 4, 7, 21, 312, 357, 393, 368, 589, 564, 548, 315, 431, 277, 738, 636, 378, 408, 356, 257, 72, 8, 6, 4, 3, 3, 5, 16, 263, 329, 454, 400, 682, 539, 552, 279, 530, 438, 716, 579, 289, 308, 357, 220, 52, 8, 4, 3, 5, 3, 5, 20, 105, 246, 222, 313, 495, 469, 507, 237, 268, 418, 482, 451, 290, 193, 192, 239, 63]
# 2952
# /Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/matplotlib/axes/_axes.py:531: UserWarning: No labelled objects found. Use label='...' kwarg on individual plots.
#   warnings.warn("No labelled objects found. "
# /Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/matplotlib/tight_layout.py:222: UserWarning: tight_layout : falling back to Agg renderer
#   warnings.warn("tight_layout : falling back to Agg renderer")

from pymongo import MongoClient
client = MongoClient('localhost',27017)
from datetime import datetime
from datetime import timedelta
import numpy as np
import matplotlib.pyplot as plt
from collections import OrderedDict
db = client.run
coll = db.blog
dict_1 = OrderedDict()
a = datetime(1900,7,1,0)
for i in range(2952):
    dict_1[a]=0
    a += timedelta(hours=1)
    #print(a)
b = coll.aggregate([{'$match':{'location':'01'}},
                    {'$group':{'_id':'$date','count':{'$sum':1}}}
                    ])
num =0
for i_1 in b:
    if i_1['_id'] in dict_1:
        num=num+1
        dict_1[i_1['_id']]=i_1['count']
        #print(i_1['count'])
        #print(num)
#输出列表
list_1=[]
for i in dict_1:
    #print(dict_1[i])
    list_1.append(dict_1[i])
print(list_1)
print(len(list_1))#24*18=432
#画图
x = list(np.linspace(0,123,2953))
#z = list(np.linspace(0,123,124))
z = [0,31,62,92]
index = []
#wid = []
for i in range(2952):
    index.append(x[i])
    #wid.append(0.01+x[i])
opacity = 0.4
#wideth = 0.01
rects1 = plt.bar(index, list_1, 1/24, alpha=opacity, color='b')
#rects2 = plt.bar(wid,y2,0.01,alpha=opacity, color='r')
plt.xlabel('日期')
plt.ylabel('人数')
plt.title('位置1的人数分布情况')
#name=(0704,0711,)
plt.xticks(z, tuple(z))#前面是标记的位置,后面是标记的名字
#plt.ylim(0,40)
plt.legend()
plt.tight_layout()
plt.show()